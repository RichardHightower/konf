<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Konf by advantageous</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Konf</h1>
        <p class="header">Java configuration library that uses JSON, YAML, or Javascript configuration files.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/advantageous/konf/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/advantageous/konf/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/advantageous/konf">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/advantageous">advantageous</a></p>


      </header>
      <section>
        <p><a href="http://advantageous.github.io/konf/">Konf Website</a></p>

<h1>
<a id="konf---typed-java-config-system" class="anchor" href="#konf---typed-java-config-system" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Konf - Typed Java Config system</h1>

<p>Java configuration library similar in concept to TypeSafe config,
but uses full JavaScript, YAML or JSON for configuration.</p>

<p>Uses JavaScript/JSON/YAML as config for Java. </p>

<p>You can use full JavaScript for configuration as long as you define a
variable called <code>config</code> that results in a JavaScript object which
equates to a Java map.</p>

<h2>
<a id="using-konf-on-your-project" class="anchor" href="#using-konf-on-your-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Konf on your project</h2>

<p>Konf is in the <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.advantageous.konf%22">public maven repo</a>.</p>

<h3>
<a id="using-konf-from-maven" class="anchor" href="#using-konf-from-maven" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using konf from maven</h3>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;io.advantageous.konf&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;konf&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;1.3.0.RELEASE&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<h3>
<a id="using-konf-from-gradle" class="anchor" href="#using-konf-from-gradle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using konf from gradle</h3>

<div class="highlight highlight-source-java"><pre>compile <span class="pl-s"><span class="pl-pds">'</span>io.advantageous.konf:konf:1.3.0.RELEASE<span class="pl-pds">'</span></span></pre></div>

<h3>
<a id="using-konf-from-scala-sbt" class="anchor" href="#using-konf-from-scala-sbt" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using konf from scala sbt</h3>

<div class="highlight highlight-source-java"><pre>libraryDependencies <span class="pl-k">+=</span> <span class="pl-s"><span class="pl-pds">"</span>io.advantageous.konf<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>konf<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>1.3.0.RELEASE<span class="pl-pds">"</span></span></pre></div>

<h3>
<a id="using-konf-from-clojure-leiningen" class="anchor" href="#using-konf-from-clojure-leiningen" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using konf from clojure leiningen</h3>

<div class="highlight highlight-source-lisp"><pre>[io.advantageous.konf/konf <span class="pl-s"><span class="pl-pds">"</span>1.3.0.RELEASE<span class="pl-pds">"</span></span>]</pre></div>

<p>Here is an example config for JavaScript. </p>

<p>Konf expects the <code>config</code> variable to be set to a JavaScript object with 
properties.</p>

<h4>
<a id="javascript-based-configuration-for-java" class="anchor" href="#javascript-based-configuration-for-java" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JavaScript based configuration for Java</h4>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> config <span class="pl-k">=</span> {

  myUri<span class="pl-k">:</span> <span class="pl-en">uri</span>(<span class="pl-s"><span class="pl-pds">"</span>http://host:9000/path?foo=bar<span class="pl-pds">"</span></span>),

  someKey<span class="pl-k">:</span> {
    nestedKey<span class="pl-k">:</span> <span class="pl-c1">234</span>,
    other<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>this text<span class="pl-pds">"</span></span>
  }

};</pre></div>

<h2>
<a id="defining-your-own-dsl" class="anchor" href="#defining-your-own-dsl" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Defining your own DSL</h2>

<p>You can define you own config DSL for your environment. 
We have a <a href="https://github.com/advantageous/konf/wiki/Config-Logic---creating-your-own-config-DSL">full example that shows you how to create a custom config DSL</a>
for your internal projects. The example uses Mesosphere and Docker PORT 
look ups and it is from a real project. </p>

<h4>
<a id="defining-your-own-config-dsl" class="anchor" href="#defining-your-own-config-dsl" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Defining your own config DSL</h4>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> config <span class="pl-k">=</span> {

  platform<span class="pl-k">:</span> {

    statsd<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>udp://<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-en">getDockerHost</span>() <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>:8125<span class="pl-pds">"</span></span>,

    servicePort<span class="pl-k">:</span> <span class="pl-en">mesosPortAt</span>(<span class="pl-c1">0</span>, <span class="pl-c1">8080</span>),
    adminPort<span class="pl-k">:</span> <span class="pl-en">mesosPortAt</span>(<span class="pl-c1">1</span>, <span class="pl-c1">9090</span>),
    <span class="pl-k">...</span></pre></div>

<p>See the real world for <a href="https://github.com/advantageous/konf/wiki/Config-Logic---creating-your-own-config-DSL">example that uses Konf to find ports under
Mesosphere</a> 
(running in stating or prod) or under Docker (running on 
a local developers box). </p>

<h2>
<a id="java-interface-for-konf-is-config" class="anchor" href="#java-interface-for-konf-is-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Java interface for Konf is Config.</h2>

<p>The Java interface for Konf is Config.
You can get a sub Config from Config (<code>getConfig(path)</code>).
The <code>path</code> is always in dot notation (<code>this.that.foo.bar</code>).
You can also use:</p>

<ul>
<li><code>hasPath(path)</code></li>
<li>
<code>getInt(path)</code> </li>
<li><code>getLong(path)</code></li>
<li><code>getDouble(path)</code></li>
<li>
<code>getBoolean(path)</code> can be true, false, "yes", "no", "on", "off", yes, no, off, on</li>
<li><code>getString(path)</code></li>
<li>
<code>getStringList(path)</code> gets a list of strings</li>
<li>
<code>getConfig(path)</code> gets a sub-config.</li>
<li>
<code>getMap(path)</code> gets a map which is a sub-config.</li>
<li>
<code>getConfigList(path)</code> gets a list of configs at the location specified.</li>
<li>
<code>getIntList(path)</code> </li>
<li><code>getLongList(path)</code></li>
<li><code>getDoubleList(path)</code></li>
<li><code>getBooleanList(path)</code></li>
<li>
<code>getDuration(path)</code> gets <code>java.time.Duration</code> useful for timeouts</li>
<li>
<code>getDurationList(path)</code> gets duration list</li>
<li>
<code>getUripath)</code> gets <code>java.net.URI</code> useful for connecting to downstream services</li>
<li>
<code>getUriList(path)</code> useful for connecting to downstream services</li>
</ul>

<p><code>getMap</code> works with JavaScript objects. <code>getStringList</code> and <code>getConfigList</code> works
with JavaScript array of string and a JavaScript array of JavaScript objects. </p>

<p>Not you get an exception if the <code>path</code> requested is not found. 
Use <code>hasPath(path)</code> if you think the config path might be missing. </p>

<p>Here is the full interface.</p>

<h4>
<a id="config-interface" class="anchor" href="#config-interface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Config interface</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">Config</span> {

    <span class="pl-c">/** Get string at location. */</span>
    <span class="pl-smi">String</span> <span class="pl-en">getString</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Checks to see if config has the path specified. */</span>
    <span class="pl-k">boolean</span> <span class="pl-en">hasPath</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get int at location. */</span>
    <span class="pl-k">int</span> <span class="pl-en">getInt</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get float at location. */</span>
    <span class="pl-k">float</span> <span class="pl-en">getFloat</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get double at location. */</span>
    <span class="pl-k">double</span> <span class="pl-en">getDouble</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get long at location. */</span>
    <span class="pl-k">long</span> <span class="pl-en">getLong</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get list of strings at location. */</span>
    <span class="pl-k">List&lt;<span class="pl-smi">String</span>&gt;</span> <span class="pl-en">getStringList</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get map at location. */</span>
    <span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Object</span>&gt;</span> <span class="pl-en">getMap</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get a sub-config at location. */</span>
    <span class="pl-smi">Config</span> <span class="pl-en">getConfig</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get list of sub-configs at location. */</span>
    <span class="pl-k">List&lt;<span class="pl-smi">Config</span>&gt;</span> <span class="pl-en">getConfigList</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/**  Get a single POJO out of config at path. */</span>
    <span class="pl-k">&lt;<span class="pl-smi">T</span>&gt;</span> <span class="pl-smi">T</span> <span class="pl-en">get</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>, <span class="pl-k">Class&lt;<span class="pl-smi">T</span>&gt;</span> <span class="pl-v">type</span>);

    <span class="pl-c">/**  Get a list of POJOs. */</span>
    <span class="pl-k">&lt;<span class="pl-smi">T</span>&gt;</span> <span class="pl-k">List&lt;<span class="pl-smi">T</span>&gt;</span> <span class="pl-en">getList</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>, <span class="pl-k">Class&lt;<span class="pl-smi">T</span>&gt;</span> <span class="pl-v">componentType</span>);

    <span class="pl-c">/** Get duration. Good for timeouts */</span>
    <span class="pl-smi">Duration</span> <span class="pl-en">getDuration</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get duration list. */</span>
    <span class="pl-k">List&lt;<span class="pl-smi">Duration</span>&gt;</span> <span class="pl-en">getDurationList</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);

    <span class="pl-c">/** Get int list. */</span>
    <span class="pl-k">List&lt;<span class="pl-smi">Integer</span>&gt;</span> <span class="pl-en">getIntegerList</span>(<span class="pl-smi">String</span> <span class="pl-v">path</span>);
    <span class="pl-c1">...</span>
}
</pre></div>

<p>The <code>getX</code> methods work like you would expect. Given this config file.</p>

<h2>
<a id="javascript-functions-for-config" class="anchor" href="#javascript-functions-for-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JavaScript functions for config</h2>

<h4>
<a id="javascript-functions-that-we-support" class="anchor" href="#javascript-functions-that-we-support" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JavaScript functions that we support</h4>

<ul>
<li>
<code>sysProp(propName)</code> to read a sysProp as in <code>fooSize : sysProp("my.foo.size")</code>
</li>
<li>
<code>sysPropOrDefault(propName, defaultValue)</code> to read a sysProp or a default</li>
<li>
<code>isWindowsOS()</code>, <code>isMacOS()</code>, <code>isUnix()</code>, <code>isLinux()</code>, <code>isSolaris()</code> </li>
<li>
<code>env()</code> as in <code>fooSize : env('MY_FOO_SIZE')</code> or even <code>fooSize : sysPropOrDefault("my.foo.size", env('MY_FOO_SIZE'))</code>
</li>
<li>
<code>uri()</code> which creates a <code>java.net.URI</code> as in <code>fooURI : uri ("http://localhost:8080/")</code> </li>
<li>
<code>java.time.Duration</code> is imported as <code>duration</code> </li>
<li> <code>java.lang.System</code> is imported as <code>system</code><br>
</li>
<li>
<code>seconds(units)</code>, <code>minutes(units)</code>, <code>hours(units)</code>, <code>days(units)</code>, <code>millis(units)</code> and <code>milliseconds(units</code>) define a <code>Duration</code> which is useful for configuring timeouts and interval jobs</li>
<li>constants <code>yes</code>, <code>no</code>, <code>on</code>, <code>off</code> for boolean config</li>
</ul>

<h4>
<a id="sample-config-for-testing-and-showing-how-config-works" class="anchor" href="#sample-config-for-testing-and-showing-how-config-works" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sample config for testing and showing how config works</h4>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> config <span class="pl-k">=</span> {

  myUri<span class="pl-k">:</span> <span class="pl-en">uri</span>(<span class="pl-s"><span class="pl-pds">"</span>http://host:9000/path?foo=bar<span class="pl-pds">"</span></span>),

  someKey<span class="pl-k">:</span> {
    nestedKey<span class="pl-k">:</span> <span class="pl-c1">234</span>,
    other<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>this text<span class="pl-pds">"</span></span>
  },

  int1<span class="pl-k">:</span> <span class="pl-c1">1</span>,
  float1<span class="pl-k">:</span> <span class="pl-c1">1.0</span>,
  double1<span class="pl-k">:</span> <span class="pl-c1">1.0</span>,
  long1<span class="pl-k">:</span> <span class="pl-c1">1</span>,
  string1<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>rick<span class="pl-pds">"</span></span>,
  stringList<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>Foo<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Bar<span class="pl-pds">'</span></span>],
  configInner<span class="pl-k">:</span> {
    int2<span class="pl-k">:</span> <span class="pl-c1">2</span>,
    float2<span class="pl-k">:</span> <span class="pl-c1">2.0</span>
  },
  uri<span class="pl-k">:</span> <span class="pl-en">uri</span>(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/foo<span class="pl-pds">"</span></span>),
  myClass<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>java.lang.Object<span class="pl-pds">"</span></span>,
  myURI<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/foo<span class="pl-pds">"</span></span>,
  employee<span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">123</span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Geoff<span class="pl-pds">"</span></span>},
  employees<span class="pl-k">:</span> [
    {id<span class="pl-k">:</span> <span class="pl-c1">123</span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Geoff<span class="pl-pds">"</span></span>},
    {id<span class="pl-k">:</span> <span class="pl-c1">456</span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Rick<span class="pl-pds">"</span></span>},
    {id<span class="pl-k">:</span> <span class="pl-c1">789</span>, <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Paul<span class="pl-pds">"</span></span>}
  ]
};
</pre></div>

<p>We can do the following operations. </p>

<p>First we load the config.</p>

<h4>
<a id="loading-the-config" class="anchor" href="#loading-the-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Loading the config.</h4>

<div class="highlight highlight-source-java"><pre>
    <span class="pl-k">private</span> <span class="pl-smi">Config</span> config;

    @<span class="pl-smi">Before</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> setUp() throws <span class="pl-smi">Exception</span> {
        config <span class="pl-k">=</span> <span class="pl-smi">ConfigLoader</span><span class="pl-k">.</span>load(<span class="pl-s"><span class="pl-pds">"</span>test-config.js<span class="pl-pds">"</span></span>);
    }</pre></div>

<p>Note that <code>ConfigLoader.load</code> takes a variable length string array.
By default a resource String can contain a valid URI, which 
can have the scheme <code>classpath</code>, <code>file</code>, or <code>http</code>. If you do not specify
a scheme than the path is assumed to be a classpath resource. </p>

<h4>
<a id="using-different-resources" class="anchor" href="#using-different-resources" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using different resources</h4>

<div class="highlight highlight-source-java"><pre>        config <span class="pl-k">=</span> <span class="pl-smi">ConfigLoader</span><span class="pl-k">.</span>load(
                      <span class="pl-s"><span class="pl-pds">"</span>/io/mycompany/foo-classpath.js<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>classpath:test-config.js<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>classpath://foo.js<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>classpath:/bar.js<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>file://opt/app/config.js<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>file:///opt/app/config2.js<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>file:/opt/app/config.js<span class="pl-pds">"</span></span>,
                      <span class="pl-s"><span class="pl-pds">"</span>http://my.internal.server:9090/foo.js<span class="pl-pds">"</span></span>
                      );
</pre></div>

<p>Then we show reading basic types with the <code>config</code> object using <code>getX</code>.</p>

<h4>
<a id="reading-basic-types-from-config" class="anchor" href="#reading-basic-types-from-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reading basic types from config</h4>

<div class="highlight highlight-source-java"><pre>    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> testSimple() throws <span class="pl-smi">Exception</span> {

        <span class="pl-c">//getInt</span>
        assertEquals(<span class="pl-c1">1</span>, config<span class="pl-k">.</span>getInt(<span class="pl-s"><span class="pl-pds">"</span>int1<span class="pl-pds">"</span></span>));

        <span class="pl-c">//getStringList</span>
        assertEquals(asList(<span class="pl-s"><span class="pl-pds">"</span>Foo<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Bar<span class="pl-pds">"</span></span>), 
               config<span class="pl-k">.</span>getStringList(<span class="pl-s"><span class="pl-pds">"</span>stringList<span class="pl-pds">"</span></span>));

        <span class="pl-c">//getString       </span>
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>rick<span class="pl-pds">"</span></span>, config<span class="pl-k">.</span>getString(<span class="pl-s"><span class="pl-pds">"</span>string1<span class="pl-pds">"</span></span>));

        <span class="pl-c">//getDouble</span>
        assertEquals(<span class="pl-c1">1.0</span>, config<span class="pl-k">.</span>getDouble(<span class="pl-s"><span class="pl-pds">"</span>double1<span class="pl-pds">"</span></span>), <span class="pl-c1">0.001</span>);

        <span class="pl-c">//getLong</span>
        assertEquals(<span class="pl-c1">1L</span>, config<span class="pl-k">.</span>getLong(<span class="pl-s"><span class="pl-pds">"</span>long1<span class="pl-pds">"</span></span>));

        <span class="pl-c">//getFloat</span>
        assertEquals(<span class="pl-c1">1.0f</span>, config<span class="pl-k">.</span>getFloat(<span class="pl-s"><span class="pl-pds">"</span>float1<span class="pl-pds">"</span></span>), <span class="pl-c1">0.001</span>);

        <span class="pl-c">//Basic JDK value types are supported like class.</span>
        assertEquals(<span class="pl-smi">Object</span><span class="pl-k">.</span>class, config<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>myClass<span class="pl-pds">"</span></span>, <span class="pl-smi">Class</span><span class="pl-k">.</span>class));

        <span class="pl-c">//Basic JDK value types are supported like URI.</span>
        assertEquals(<span class="pl-c1">URI</span><span class="pl-k">.</span>create(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/foo<span class="pl-pds">"</span></span>), 
                config<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>myURI<span class="pl-pds">"</span></span>, <span class="pl-smi">URI</span><span class="pl-k">.</span>class));

        assertEquals(<span class="pl-c1">URI</span><span class="pl-k">.</span>create(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:8080/foo<span class="pl-pds">"</span></span>), 
                config<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>uri<span class="pl-pds">"</span></span>, <span class="pl-smi">URI</span><span class="pl-k">.</span>class));

    }
</pre></div>

<p>You can work with nested properties as well.</p>

<h4>
<a id="reading-a-nested-config-from-the-config" class="anchor" href="#reading-a-nested-config-from-the-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reading a nested config from the config</h4>

<div class="highlight highlight-source-java"><pre>    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> testGetConfig() throws <span class="pl-smi">Exception</span> {
        <span class="pl-c">//Read nested config.</span>
        <span class="pl-k">final</span> <span class="pl-smi">Config</span> configInner <span class="pl-k">=</span> config<span class="pl-k">.</span>getConfig(<span class="pl-s"><span class="pl-pds">"</span>configInner<span class="pl-pds">"</span></span>);
        assertEquals(<span class="pl-c1">2</span>, configInner<span class="pl-k">.</span>getInt(<span class="pl-s"><span class="pl-pds">"</span>int2<span class="pl-pds">"</span></span>));
        assertEquals(<span class="pl-c1">2.0f</span>, configInner<span class="pl-k">.</span>getFloat(<span class="pl-s"><span class="pl-pds">"</span>float2<span class="pl-pds">"</span></span>), <span class="pl-c1">0.001</span>);
    }

    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> testGetMap() throws <span class="pl-smi">Exception</span> {
        <span class="pl-c">//Read nested config as a Java map.</span>
        <span class="pl-k">final</span> <span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Object</span>&gt;</span> map <span class="pl-k">=</span> config<span class="pl-k">.</span>getMap(<span class="pl-s"><span class="pl-pds">"</span>configInner<span class="pl-pds">"</span></span>);
        assertEquals(<span class="pl-c1">2</span>, (<span class="pl-k">int</span>) map<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>int2<span class="pl-pds">"</span></span>));
        assertEquals(<span class="pl-c1">2.0f</span>, (<span class="pl-k">double</span>) map<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>float2<span class="pl-pds">"</span></span>), <span class="pl-c1">0.001</span>);
    }</pre></div>

<p>You can read deeply nested config items as well by specifying the 
property path using dot notation. </p>

<h4>
<a id="reading-nested-properties-with-dot-notation-from-config" class="anchor" href="#reading-nested-properties-with-dot-notation-from-config" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reading nested properties with dot notation from config</h4>

<div class="highlight highlight-source-java"><pre>    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> testSimplePath() throws <span class="pl-smi">Exception</span> {

        assertTrue(config<span class="pl-k">.</span>hasPath(<span class="pl-s"><span class="pl-pds">"</span>configInner.int2<span class="pl-pds">"</span></span>));
        assertFalse(config<span class="pl-k">.</span>hasPath(<span class="pl-s"><span class="pl-pds">"</span>configInner.foo.bar<span class="pl-pds">"</span></span>));
        assertEquals(<span class="pl-c1">2</span>, config<span class="pl-k">.</span>getInt(<span class="pl-s"><span class="pl-pds">"</span>configInner.int2<span class="pl-pds">"</span></span>));
        assertEquals(<span class="pl-c1">2.0f</span>, config<span class="pl-k">.</span>getFloat(<span class="pl-s"><span class="pl-pds">"</span>configInner.float2<span class="pl-pds">"</span></span>), <span class="pl-c1">0.001</span>);
    }</pre></div>

<p>You can also read POJOs directly out of the config file.</p>

<h4>
<a id="reading-a-pojo-directly-out-of-the-config-file" class="anchor" href="#reading-a-pojo-directly-out-of-the-config-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reading a pojo directly out of the config file</h4>

<div class="highlight highlight-source-java"><pre>
    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> testReadClass() throws <span class="pl-smi">Exception</span> {
        <span class="pl-k">final</span> <span class="pl-smi">Employee</span> employee <span class="pl-k">=</span> config<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>employee<span class="pl-pds">"</span></span>, <span class="pl-smi">Employee</span><span class="pl-k">.</span>class);
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>Geoff<span class="pl-pds">"</span></span>, employee<span class="pl-k">.</span>name);
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>123<span class="pl-pds">"</span></span>, employee<span class="pl-k">.</span>id);
    }
</pre></div>

<p>You can read a list of POJOs at once.</p>

<h4>
<a id="reading-a-pojo-list-directly-out-of-the-config-file" class="anchor" href="#reading-a-pojo-list-directly-out-of-the-config-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reading a pojo list directly out of the config file</h4>

<div class="highlight highlight-source-java"><pre>
    @<span class="pl-smi">Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> testReadListOfClass() throws <span class="pl-smi">Exception</span> {
        <span class="pl-k">final</span> <span class="pl-k">List&lt;<span class="pl-smi">Employee</span>&gt;</span> employees <span class="pl-k">=</span> config<span class="pl-k">.</span>getList(<span class="pl-s"><span class="pl-pds">"</span>employees<span class="pl-pds">"</span></span>, <span class="pl-smi">Employee</span><span class="pl-k">.</span>class);
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>Geoff<span class="pl-pds">"</span></span>, employees<span class="pl-k">.</span>get(<span class="pl-c1">0</span>)<span class="pl-k">.</span>name);
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>123<span class="pl-pds">"</span></span>, employees<span class="pl-k">.</span>get(<span class="pl-c1">0</span>)<span class="pl-k">.</span>id);
    }</pre></div>

<p>You can also read a list of config objects out of the config as well.</p>

<h4>
<a id="reading-a-config-list-directly-out-of-the-config-file" class="anchor" href="#reading-a-config-list-directly-out-of-the-config-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reading a config list directly out of the config file</h4>

<div class="highlight highlight-source-java"><pre>
        <span class="pl-k">final</span> <span class="pl-k">List&lt;<span class="pl-smi">Config</span>&gt;</span> employees <span class="pl-k">=</span> config<span class="pl-k">.</span>getConfigList(<span class="pl-s"><span class="pl-pds">"</span>employees<span class="pl-pds">"</span></span>);
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>Geoff<span class="pl-pds">"</span></span>, employees<span class="pl-k">.</span>get(<span class="pl-c1">0</span>)<span class="pl-k">.</span>getString(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>));
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>123<span class="pl-pds">"</span></span>, employees<span class="pl-k">.</span>get(<span class="pl-c1">0</span>)<span class="pl-k">.</span>getString(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>));</pre></div>

<h2>
<a id="using-config-with-yaml" class="anchor" href="#using-config-with-yaml" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Config with YAML</h2>

<p>First include a YAML to object parser like <a href="https://github.com/EsotericSoftware/yamlbeans">YAML Beans</a>
 or a library like this.</p>

<h4>
<a id="example-yaml" class="anchor" href="#example-yaml" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example YAML</h4>

<div class="highlight highlight-source-yaml"><pre>   <span class="pl-s"><span class="pl-ent">name:</span> <span class="pl-s">Nathan Sweet</span></span>
     <span class="pl-c1"><span class="pl-ent">age:</span> 28</span>
     <span class="pl-s"><span class="pl-ent">address:</span> <span class="pl-s">4011 16th Ave S</span></span>
     <span class="pl-s"><span class="pl-ent">phone numbers:</span></span>
      <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">Home</span></span>
        <span class="pl-s"><span class="pl-ent">number:</span> <span class="pl-s">206-555-5138</span></span>
      <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">Work</span></span>
        <span class="pl-s"><span class="pl-ent">number:</span> <span class="pl-s">425-555-2306</span></span></pre></div>

<h4>
<a id="using-konf-with-yaml" class="anchor" href="#using-konf-with-yaml" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Konf with YAML</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-c">//Use YamlReader to load YAML file.</span>
<span class="pl-smi">YamlReader</span> reader <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">YamlReader</span>(<span class="pl-k">new</span> <span class="pl-smi">FileReader</span>(<span class="pl-s"><span class="pl-pds">"</span>contact.yml<span class="pl-pds">"</span></span>));

<span class="pl-c">//Convert object read from YAML into Konf config</span>
<span class="pl-smi">Config</span> config <span class="pl-k">=</span> <span class="pl-smi">ConfigLoader</span><span class="pl-k">.</span>loadFromObject(reader<span class="pl-k">.</span>read());

<span class="pl-c">//Now you have strongly typed access to fields</span>
<span class="pl-smi">String</span> address <span class="pl-k">=</span> config<span class="pl-k">.</span>getString(<span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>);</pre></div>

<p>You can also read Pojos from anywhere in the YAML file as well as 
sub configs. </p>

<h2>
<a id="you-can-also-use-konf-with-json-using-boon" class="anchor" href="#you-can-also-use-konf-with-json-using-boon" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>You can also use Konf with JSON using Boon</h2>

<p>See <a href="https://github.com/advantageous/boon">Boon</a> JSON parser project,
and <a href="https://github.com/boonproject/boon/wiki/Boon-JSON-in-five-minutes">Boon in five minutes</a></p>

<h4>
<a id="using-konf-with-json" class="anchor" href="#using-konf-with-json" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Konf with JSON</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">ObjectMapper</span> mapper <span class="pl-k">=</span>  <span class="pl-smi">JsonFactory</span><span class="pl-k">.</span>create();


<span class="pl-c">/* Convert object read from YAML into Konf config.</span>
<span class="pl-c">  'src' can be File, InputStream, Reader, String. */</span>
<span class="pl-smi">Config</span> config <span class="pl-k">=</span> <span class="pl-smi">ConfigLoader</span><span class="pl-k">.</span>loadFromObject(mapper<span class="pl-k">.</span>fromJson(src));


<span class="pl-c">//Now you have strongly typed access to fields</span>
<span class="pl-smi">String</span> address <span class="pl-k">=</span> config<span class="pl-k">.</span>getString(<span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>);
</pre></div>

<p>Boon supports LAX JSON (Json with comments, and you do not need to quote
the field).</p>

<h4>
<a id="working-with-javatimeduration" class="anchor" href="#working-with-javatimeduration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Working with java.time.Duration</h4>

<ul>
<li>
<code>getDuration(path)</code> get a duration</li>
<li>
<code>getDurationList(path)</code> get a duration list</li>
</ul>

<p>Konf supports "10 seconds" style config for duration as well as
having built-in functions and support for ISO-8601. See documentation 
for <a href="https://github.com/advantageous/konf/wiki/Working-with-Durations">duration config</a>
for more details.</p>

<h5>
<a id="konf-can-reads-list-of-numbers" class="anchor" href="#konf-can-reads-list-of-numbers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Konf can reads list of numbers.</h5>

<ul>
<li>
<code>getIntList</code> reads list of ints</li>
<li>
<code>getLongList</code> reads list of longs</li>
<li>
<code>getDoubleList</code> reads list of doubles</li>
<li>
<code>getFloatList</code> reads list of floats</li>
</ul>

<p>See documentation <a href="https://github.com/advantageous/konf/wiki/Working-with-lists-of-ints,-longs,-doubles,">list of number configuration</a> 
for more details.</p>

<h4>
<a id="konf-can-read-memory-sizes" class="anchor" href="#konf-can-read-memory-sizes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Konf can read memory sizes</h4>

<ul>
<li>
<code>getMemorySize(path)</code> </li>
<li><code>getMemorySizeList(path)</code></li>
</ul>

<p>This means we support config like:</p>

<h4>
<a id="sizes-supported" class="anchor" href="#sizes-supported" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sizes supported.</h4>

<div class="highlight highlight-source-js"><pre>
  diskSpace <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span> 10 gigabytes<span class="pl-pds">"</span></span>,
  diskVolumes <span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">"</span> 10 gigabytes<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>10GB<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>10 gigabytes<span class="pl-pds">"</span></span>, <span class="pl-c1">10</span>]</pre></div>

<p>We support the following size Strings. </p>

<h4>
<a id="supported-size-strings" class="anchor" href="#supported-size-strings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Supported size strings</h4>

<div class="highlight highlight-source-java"><pre></pre></div>

<h4>
<a id="thanks" class="anchor" href="#thanks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thanks</h4>

<p>If you like our configuration project, please try our 
<a href="https://github.com/advantageous/reakt">Reactive Java project</a>
or our <a href="https://github.com/advantageous/qbit">Actor based microservices lib</a>.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
